<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
	<style>
		body {
		  font: 10px sans-serif;
		}

		.axis path,
		.axis line {
		  fill: none;
		  stroke: #000;
		  shape-rendering: crispEdges;
		}

		.x.axis path {
		  display: none;
		}

		.cases {
		  fill: none;
		  stroke: steelblue;
		}
		
		.deaths {
			fill: none;
			stroke: #8A0707;
		}

		.textDeath {
			fill: #8A0707;
			stroke: none;
		}

		.textCases {
			fill: steelblue;
			stroke: none;
		}

	</style>
</head>
<body>




Ebola Cases 2014

<p>This site is auto updating. It is always based on <a href="http://healthmap.org/ebola/">the most recent data posted to healthmap.</a> We built it because we kept asking the questions: what's the rate of increase? Is it exponential? How do rates of new cases compare to deaths? This question was obscured by other charts, and we didn't just want the answer once - we wanted it every day.</p>

<div>
	<p><a href="http://www.vox.com/cards/ebola-outbreak-2014/why-is-ebola-in-the-news">Find a comprehensive overview of the 2014 ebola outbreak @ vox.com</a></p>
	<p><a href="http://www.doctorswithoutborders.org/our-work/medical-issues/ebola">Learn about the efforts of MSF (Doctors Without Borders).</a></p>
	<p><a href="https://donate.doctorswithoutborders.org/onetime.cfm">Donate to the MSF (Doctors Without Borders) general fund, even though they are fully funded in their Ebola efforts in West Africa.</a></p>
	<p><a href="https://give.wfp.org/en/?step=country">Donate to WFP (World Food Program), which is feeding people in affected quarantine zones.</a></p>
	<p>The WHO warns that the crisis may be <a href="https://www.google.com/search?q=ebola+underestimate&oq=ebola+und&aqs=chrome.0.69i59j69i57j0l4.1300j0j7&sourceid=chrome&es_sm=91&ie=UTF-8#q=ebola+underestimate&tbm=nws">vastly underestimated.</a></p>
	

</div>







<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
<script type="text/javascript">

var margin = {top: 20, right: 20, bottom: 30, left: 50},
  width = 960 - margin.left - margin.right,
  height = 500 - margin.top - margin.bottom;

var parseDate = d3.time.format("%B %e").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var casesLine = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.cases); });

var deathLine = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.deaths); });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.append("text")
	.attr("x", 100)
	.attr("y", 100)
	.text("Deaths")
	.attr("class", "textDeath")

svg.append("text")
	.attr("x", 100)
	.attr("y", 85)
	.text("Cases")
	.attr("class", "textCases")

function addAxis (data) {

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain(d3.extent(data, function(d) { return d.cases; }));

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("People");

}


function addCasesLine (data) {

	  svg.append("path")
      .datum(data)
      .attr("class", "cases")
      .attr("d", casesLine)
}

function addDeathLine (data) {
		  svg.append("path")
      .datum(data)
      .attr("class", "deaths")
      .attr("d", deathLine)
}


function visualize (data) {

	 data = _.each(data, function(d){
  	d.date = parseDate(d.date);
  })

	addAxis(data);
	addCasesLine(data);  
	addDeathLine(data)

};

d3.json("/ebola", function(error, json) {
  if (error) return console.warn(error);
  data = json;
  visualize(data);
  console.log(data)
});

</script>
</body>
</html>